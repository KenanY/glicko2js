!function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&g.test("."+a)}function e(a,b){if(!d(b))throw f("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),g=0,h=e.length;h>g&&a!==c;g++){var i=e[g];a=null!==a?a[i]:c}return a}var f=b.$$minErr("$resource"),g=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(a,d){function g(a){return h(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function h(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function i(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function j(g,h,q){function r(a,b){var c={};return b=n({},h,b),m(b,function(b,d){p(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function s(a){return a.resource}function t(a){o(a||{},this)}var u=new i(g);return q=n({},k,q),m(q,function(e,g){var h=/^(POST|PUT|PATCH)$/i.test(e.method);t[g]=function(g,i,j,k){var q,v,w,x={};switch(arguments.length){case 4:w=k,v=j;case 3:case 2:if(!p(i)){x=g,q=i,v=j;break}if(p(g)){v=g,w=i;break}v=i,w=j;case 1:p(g)?v=g:h?q=g:x=g;break;case 0:break;default:throw f("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var y=this instanceof t,z=y?q:e.isArray?[]:new t(q),A={},B=e.interceptor&&e.interceptor.response||s,C=e.interceptor&&e.interceptor.responseError||c;m(e,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(A[b]=o(a))}),h&&(A.data=q),u.setUrlParams(A,n({},r(q,e.params||{}),x),e.url);var D=a(A).then(function(a){var c=a.data,d=z.$promise;if(c){if(b.isArray(c)!==!!e.isArray)throw f("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",e.isArray?"array":"object",b.isArray(c)?"array":"object");e.isArray?(z.length=0,m(c,function(a){z.push(new t(a))})):(o(c,z),z.$promise=d)}return z.$resolved=!0,a.resource=z,a},function(a){return z.$resolved=!0,(w||l)(a),d.reject(a)});return D=D.then(function(a){var b=B(a);return(v||l)(b,a.headers),b},C),y?D:(z.$promise=D,z.$resolved=!1,z)},t.prototype["$"+g]=function(a,b,c){p(a)&&(c=b,b=a,a={});var d=t[g].call(this,a,this,b,c);return d.$promise||d}}),t.bind=function(a){return j(g,n({},h,a),q)},t}var k={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},l=b.noop,m=b.forEach,n=b.extend,o=b.copy,p=b.isFunction;return i.prototype={setUrlParams:function(a,c,d){var e,h,i=this,j=d||i.template,k=i.urlParams={};m(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw f("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},m(i.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:i.defaults[d],b.isDefined(e)&&null!==e?(h=g(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),h+"$1")):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),j=j.replace(/\/+$/,""),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),m(c,function(b,c){i.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},j}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)?e!==h[a]&&(d.cookies(a,e),i=!0):b.isDefined(h[a])?g[a]=h[a]:delete g[a];if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),function(a,b){"use strict";function c(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function d(a,c){function d(a,d,g,h){if(d=b.lowercase(d),x[d])for(;s.last()&&y[s.last()];)f("",s.last());w[d]&&s.last()==d&&f("",d),h=t[d]||!!h,h||s.push(d);var i={};g.replace(l,function(a,b,c,d,f){var g=c||d||f||"";i[b]=e(g)}),c.start&&c.start(d,i,h)}function f(a,d){var e,f=0;if(d=b.lowercase(d))for(f=s.length-1;f>=0&&s[f]!=d;f--);if(f>=0){for(e=s.length-1;e>=f;e--)c.end&&c.end(s[e]);s.length=f}}var g,i,r,s=[],u=a;for(s.last=function(){return s[s.length-1]};a;){if(i=!0,s.last()&&z[s.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(a,b){return b=b.replace(o,"$1").replace(q,"$1"),c.chars&&c.chars(e(b)),""}),f("",s.last());else if(0===a.indexOf("<!--")?(g=a.indexOf("--",4),g>=0&&a.lastIndexOf("-->",g)===g&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),i=!1)):p.test(a)?(r=a.match(p),r&&(a=a.replace(r[0],""),i=!1)):n.test(a)?(r=a.match(k),r&&(a=a.substring(r[0].length),r[0].replace(k,f),i=!1)):m.test(a)&&(r=a.match(j),r&&(a=a.substring(r[0].length),r[0].replace(j,d),i=!1)),i){g=a.indexOf("<");var v=0>g?a:a.substring(0,g);a=0>g?"":a.substring(g),c.chars&&c.chars(e(v))}if(a==u)throw h("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}f()}function e(a){return D.innerHTML=a.replace(/</g,"&lt;"),D.innerText||D.textContent||""}function f(a){return a.replace(/&/g,"&amp;").replace(s,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,g){a=b.lowercase(a),!c&&z[a]&&(c=a),c||A[a]!==!0||(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);C[e]!==!0||B[e]===!0&&!a.match(r)||(d(" "),d(c),d('="'),d(f(a)),d('"'))}),d(g?"/>":">"))},end:function(a){a=b.lowercase(a),c||A[a]!==!0||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(f(a))}}}var h=b.$$minErr("$sanitize"),i=function(a){var b=[];return d(a,g(b)),b.join("")},j=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,k=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,n=/^<\s*\//,o=/<!--(.*?)-->/g,p=/<!DOCTYPE([^>]*?)>/i,q=/<!\[CDATA\[(.*?)]]>/g,r=/^((ftp|https?):\/\/|mailto:|tel:|#)/i,s=/([^\#-~| |!])/g,t=c("area,br,col,hr,img,wbr"),u=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=c("rp,rt"),w=b.extend({},v,u),x=b.extend({},u,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=b.extend({},v,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),z=c("script,style"),A=b.extend({},t,x,y,w),B=c("background,cite,href,longdesc,src,usemap"),C=b.extend({},B,c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),D=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",i),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,c=/^mailto:/;return function(d,e){if(!d)return d;var f,h,i,j=d,k=[],l=g(k),m={};for(b.isDefined(e)&&(m.target=e);f=j.match(a);)h=f[0],f[2]==f[3]&&(h="mailto:"+h),i=f.index,l.chars(j.substr(0,i)),m.href=h,l.start("a",m),l.chars(f[0].replace(c,"")),l.end("a"),j=j.substring(i+f[0].length);return l.chars(j),k.join("")}})}(window,window.angular),function(a,b){"use strict";function c(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i="string"==typeof e[f]?decodeURIComponent(e[f]):e[f];h&&i&&(d[h.name]=i)}return d}function m(){var a=n(),d=q.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!p?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(p=!1,c.$broadcast("$routeChangeStart",a,d),q.current=a,a&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(o(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==q.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==q.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function n(){var c,f;return b.forEach(d,function(d){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p=!1,q={routes:d,reload:function(){p=!0,c.$evalAsync(m)}};return c.$on("$locationChangeSuccess",m),q}]}function d(){this.$get=function(){return{}}}function e(a,c,d,e,f){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(g,h,i,j,k){function l(){n&&(n.$destroy(),n=null),o&&(f.leave(o),o=null)}function m(){var i=a.current&&a.current.locals,j=i&&i.$template;if(j){var m=g.$new(),r=k(m,b.noop);r.html(j),f.enter(r,null,o||h,function(){!b.isDefined(p)||p&&!g.$eval(p)||c()}),l();var s=d(r.contents()),t=a.current;if(n=t.scope=m,o=r,t.controller){i.$scope=n;var u=e(t.controller,i);t.controllerAs&&(n[t.controllerAs]=u),r.data("$ngControllerController",u),r.children().data("$ngControllerController",u)}s(n),n.$emit("$viewContentLoaded"),n.$eval(q)}else l()}var n,o,p=i.autoscroll,q=i.onload||"";g.$on("$routeChangeSuccess",m),m()}}}var f=b.module("ngRoute",["ng"]).provider("$route",c);f.provider("$routeParams",d),f.directive("ngView",e),e.$inject=["$route","$anchorScroll","$compile","$controller","$animate"]}(window,window.angular),!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.glicko2=a():"undefined"!=typeof global?global.glicko2=a():"undefined"!=typeof self&&(self.glicko2=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){default_settings={tau:.5,rating:1500,rd:350,vol:.06,volatility_algorithm:"newprocedure"},a=a||default_settings,Player.prototype.defaultRating=a.rating,Player.prototype.volatility_algorithm=e[a.volatility_algorithm||default_settings.volatility_algorithm],this._tau=a.tau,this._default_rating=a.rating,this._default_rd=a.rd,this._default_vol=a.vol,this.players=[],this.players_index=0}Player=a("./glicko_player").GlickoPlayer,oldprocedure=a("./glicko_step5_oldprocedure"),newprocedure=a("./glicko_step5_newprocedure"),newproceduremax=a("./glicko_step5_newproceduremax");var e={oldprocedure:oldprocedure,newprocedure:newprocedure,newproceduremax:newproceduremax};d.prototype.removePlayers=function(){this.players=[],this.players_index=0},d.prototype.getPlayers=function(){return this.players},d.prototype.cleanPreviousMatches=function(){for(var a=0,b=this.players.length;b>a;a++)this.players[a].adv_ranks=[],this.players[a].adv_rds=[],this.players[a].outcomes=[]},d.prototype.calculatePlayersRatings=function(){for(var a=Object.keys(this.players),b=0,c=a.length;c>b;b++)this.players[a[b]].update_rank()},d.prototype.addMatch=function(a,b,c){var d=this._createInternalPlayer(a.rating,a.rd,a.vol,a.id),e=this._createInternalPlayer(b.rating,b.rd,b.vol,b.id);return this.addResult(d,e,c),{pl1:d,pl2:e}},d.prototype.makePlayer=function(a,b,c){return this._createInternalPlayer(a,b,c)},d.prototype._createInternalPlayer=function(a,b,c,d){if(void 0===d)d=this.players_index,this.players_index=this.players_index+1;else{var e=this.players[d];if(void 0!==e)return e}var f=new Player(a||this._default_rating,b||this._default_rd,c||this._default_vol,this._tau);return f.id=d,f.adv_ranks=[],f.adv_rds=[],f.outcomes=[],this.players[d]=f,f},d.prototype.addResult=function(a,b,c){a.addResult(b,c),b.addResult(a,1-c)},d.prototype.updateRatings=function(a){if("undefined"!=typeof a){this.cleanPreviousMatches();for(var b=0,c=a.length;c>b;b++){var d=a[b];this.addResult(d[0],d[1],d[2])}}this.calculatePlayersRatings()},c.Glicko2=d},{"./glicko_player":2,"./glicko_step5_newprocedure":3,"./glicko_step5_newproceduremax":4,"./glicko_step5_oldprocedure":5}],2:[function(a,b,c){function d(a,b,c,d){this._tau=d,this.setRating(a),this.setRd(b),this.setVol(c)}var e=173.7178;d.prototype.getRating=function(){return Math.round(this.__rating*e)+this.defaultRating},d.prototype.setRating=function(a){this.__rating=(a-this.defaultRating)/e},d.prototype.getRd=function(){return Math.round(100*this.__rd*e)/100},d.prototype.setRd=function(a){this.__rd=a/e},d.prototype.getVol=function(){return this.__vol},d.prototype.setVol=function(a){this.__vol=a},d.prototype.addResult=function(a,b){this.adv_ranks.push(a.__rating),this.adv_rds.push(a.__rd),this.outcomes.push(b)},d.prototype.update_rank=function(){if(!this.hasPlayed())return this._preRatingRD(),void 0;var a=this._variance(),b=this._delta(a);this.__vol=this.volatility_algorithm(a,b),this._preRatingRD(),this.__rd=1/Math.sqrt(1/Math.pow(this.__rd,2)+1/a);for(var c=0,d=0,e=this.adv_ranks.length;e>d;d++)c+=this._g(this.adv_rds[d])*(this.outcomes[d]-this._E(this.adv_ranks[d],this.adv_rds[d]));this.__rating+=Math.pow(this.__rd,2)*c},d.prototype.hasPlayed=function(){return this.outcomes.length>0},d.prototype._preRatingRD=function(){this.__rd=Math.sqrt(Math.pow(this.__rd,2)+Math.pow(this.__vol,2))},d.prototype._variance=function(){for(var a=0,b=0,c=this.adv_ranks.length;c>b;b++){var d=this._E(this.adv_ranks[b],this.adv_rds[b]);a+=Math.pow(this._g(this.adv_rds[b]),2)*d*(1-d)}return 1/a},d.prototype._E=function(a,b){return 1/(1+Math.exp(-1*this._g(b)*(this.__rating-a)))},d.prototype._g=function(a){return 1/Math.sqrt(1+3*Math.pow(a,2)/Math.pow(Math.PI,2))},d.prototype._delta=function(a){for(var b=0,c=0,d=this.adv_ranks.length;d>c;c++)b+=this._g(this.adv_rds[c])*(this.outcomes[c]-this._E(this.adv_ranks[c],this.adv_rds[c]));return a*b},c.GlickoPlayer=d},{}],3:[function(a,b){b.exports=function(a,b){function c(a,b,c,d){return function(e){return Math.exp(e)*(Math.pow(a,2)-Math.pow(d.__rd,2)-b-Math.exp(e))/(2*Math.pow(Math.pow(d.__rd,2)+b+Math.exp(e),2))-(e-c)/Math.pow(d._tau,2)}}var d,e,f=1e-7,g=Math.log(Math.pow(this.__vol,2)),h=c(b,a,g,this);if(Math.pow(b,2)>Math.pow(this.__rd,2)+a)d=Math.log(Math.pow(b,2)-Math.pow(this.__rd,2)-a);else{for(e=1;h(g-e*this._tau)<0;)e+=1;d=g-e*this._tau}for(var i,j,k=h(g),l=h(d);Math.abs(d-g)>f;)i=g+(g-d)*k/(l-k),j=h(i),0>j*l?(g=d,k=l):k/=2,d=i,l=j;return Math.exp(g/2)}},{}],4:[function(a,b){b.exports=function(a,b){var c,d,e=Math.log(Math.pow(this.__vol,2)),f=this._makef(b,a,e),g=1e-7;if(Math.pow(b,2)>Math.pow(this.__rd,2)+a)c=Math.log(Math.pow(b,2)-Math.pow(this.__rd,2)-a);else{for(d=1;f(e-d*this._tau)<0;)d+=1;c=e-d*this._tau}for(var h,i,j=f(e),k=f(c);Math.abs(c-e)>g;)h=e+(e-c)*j/(k-j),i=f(h),0>i*k?(e=c,j=k):j/=2,c=h,k=i;return Math.min(1,Math.exp(e/2))}},{}],5:[function(a,b){b.exports=function(a,b){function c(a,b,c,d,e,f){var g=Math.pow(a,2)+b+Math.exp(c);return-(c-d)/Math.pow(e,2)-.5*Math.exp(c)/g+.5*Math.exp(c)*Math.pow(f/g,2)}function e(a,b,c,e,f){return d=Math.pow(a,2)+b+Math.exp(c),-1/Math.pow(e,2)-.5*Math.exp(c)/d+.5*Math.exp(c)*(Math.exp(c)+Math.pow(f,2))/Math.pow(d,2)-Math.pow(Math.exp(c),2)*Math.pow(f,2)/Math.pow(d,3)}function f(a,b,c,d){var f,g,h,i,j,k;if(i=e(a,b,0,d,c),0>i)return 1;for(f=0,g=f,j=i,f-=1,i=e(a,b,f,d,c);i>0;)g=f,j=i,f-=1,i=e(a,b,f,d,c);for(var l=0;21>l;l++)h=i*(f-g)/(j-i)+f,k=e(a,b,h,d,c),k>0?(f=h,i=k):(g=h,j=k);return Math.exp((i*(f-g)/(j-i)+f)/2)}var g,h,i,j,k,l,m,n,o,p=this.__vol,q=this.__rd,r=this._tau;if(n=f(q,a,b,r),g=Math.log(Math.pow(p,2)),k=c(q,a,0,g,r,b),k>0)o=n;else{for(h=0,i=h,l=k,h-=1,k=c(q,a,h,g,r,b);0>k;)i=h,l=k,h-=1,k=c(q,a,h,g,r,b);for(var s=0;21>s;s++)j=k*(h-i)/(l-k)+h,m=c(q,a,j,g,r,b),m>0?(h=j,k=m):(i=j,l=m);o=Math.exp((k*(h-i)/(l-k)+h)/2)>n?n:Math.exp((k*(h-i)/(l-k)+h)/2)}return o}},{}]},{},[1])(1)});